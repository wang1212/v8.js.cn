<!doctype html><html lang=zh-CN><meta charset=utf-8><title>Extra content for "Understanding the ECMAScript spec, part 2" · V8</title><meta content="width=device-width,initial-scale=1" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=' js'</script><meta content="Tutorial on reading the ECMAScript specification" name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li class=active><a href=/blog/ >博客</a><li><a href=/docs/ >文档</a><li><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline>Extra content for "Understanding the ECMAScript spec, part 2"</h1><p class=meta>发布时间 <time datetime="2020-03-02 00:00:00" itemprop=datePublished title="2020-03-02 00:00:00">2020-03-02</time> · 标签： <a href=/blog/tags/ecmascript/ class=tag>ECMAScript</a></header><div itemprop=articleBody><h3 id=why-is-o2.foo-an-assignmentexpression%3F>Why is <code>o2.foo</code> an <code>AssignmentExpression</code>? <a href=#why-is-o2.foo-an-assignmentexpression%3F class=bookmark>#</a></h3><p><code>o2.foo</code> doesn’t look like an <code>AssignmentExpression</code> since there’s no assignment. Why is it an <code>AssignmentExpression</code>?<p>The spec actually allows an <code>AssignmentExpression</code> both as an argument and as the right hand side of an assignment. For example:<pre class=language-js><code class=language-js><span class="token keyword">function</span> <span class="token function">simple</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The argument was '</span> <span class="token operator">+</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token function">simple</span><span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → Logs “The argument was 1”.</span><br>x<span class="token punctuation">;</span><br><span class="token comment">// → 1</span></code></pre><p>…and…<pre class=language-js><code class=language-js>x <span class="token operator">=</span> y <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><br>x<span class="token punctuation">;</span> <span class="token comment">// 5</span><br>y<span class="token punctuation">;</span> <span class="token comment">// 5</span></code></pre><p><code>o2.foo</code> is an <code>AssignmentExpression</code> which doesn't assign anything. This follows from the following grammar productions, each one taking the "simplest" case until the last one:<p>An <code>AssignmentExpresssion</code> doesn't need to have an assignment, it can also be just a <code>ConditionalExpression</code>:<blockquote><p><strong><a href=https://tc39.es/ecma262/#sec-assignment-operators><code>AssignmentExpression : ConditionalExpression</code></a></strong></blockquote><p>(There are other productions too, here we show only the relevant one.)<p>A <code>ConditionalExpression</code> doesn't need to have a conditional (<code>a == b ? c : d</code>), it can also be just a <code>ShortcircuitExpression</code>:<blockquote><p><strong><a href=https://tc39.es/ecma262/#sec-conditional-operator><code>ConditionalExpression : ShortCircuitExpression</code></a></strong></blockquote><p>And so on:<blockquote><p><a href=https://tc39.es/ecma262/#prod-ShortCircuitExpression><code>ShortCircuitExpression : LogicalORExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-LogicalORExpression><code>LogicalORExpression : LogicalANDExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-LogicalANDExpression><code>LogicalANDExpression : BitwiseORExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-BitwiseORExpression><code>BitwiseORExpression : BitwiseXORExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-BitwiseXORExpression><code>BitwiseXORExpression : BitwiseANDExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-BitwiseANDExpression><code>BitwiseANDExpression : EqualityExpression</code></a><p><a href=https://tc39.es/ecma262/#sec-equality-operators><code>EqualityExpression : RelationalExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-RelationalExpression><code>RelationalExpression : ShiftExpression</code></a></blockquote><p>Almost there…<blockquote><p><a href=https://tc39.es/ecma262/#prod-ShiftExpression><code>ShiftExpression : AdditiveExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-AdditiveExpression><code>AdditiveExpression : MultiplicativeExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-MultiplicativeExpression><code>MultiplicativeExpression : ExponentialExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-ExponentiationExpression><code>ExponentialExpression : UnaryExpression</code></a></blockquote><p>Don’t despair! Just a couple of more productions…<blockquote><p><a href=https://tc39.es/ecma262/#prod-UnaryExpression><code>UnaryExpression : UpdateExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-UpdateExpression><code>UpdateExpression : LeftHandSideExpression</code></a></blockquote><p>Then we hit the productions for <code>LeftHandSideExpression</code>:<blockquote><p><a href=https://tc39.es/ecma262/#prod-LeftHandSideExpression><code>LeftHandSideExpression :</code></a><br><code>NewExpression</code><br><code>CallExpression</code><br><code>OptionalExpression</code></blockquote><p>It’s not clear which production might apply to <code>o2.foo</code>. We just need to know (or find out) that a <code>NewExpression</code> doesn’t actually have to have the <code>new</code> keyword.<blockquote><p><a href=https://tc39.es/ecma262/#prod-NewExpression><code>NewExpression : MemberExpression</code></a></blockquote><p><code>MemberExpression</code> sounds like something we were looking for, so now we take the production<blockquote><p><a href=https://tc39.es/ecma262/#prod-MemberExpression><code>MemberExpression : MemberExpression . IdentifierName</code></a></blockquote><p>So, <code>o2.foo</code> is a <code>MemberExpression</code> if <code>o2</code> is a valid <code>MemberExpression</code>. Luckily it's much easier to see:<blockquote><p><a href=https://tc39.es/ecma262/#prod-MemberExpression><code>MemberExpression : PrimaryExpression</code></a><p><a href=https://tc39.es/ecma262/#prod-PrimaryExpression><code>PrimaryExpression : IdentifierReference</code></a><p><a href=https://tc39.es/ecma262/#prod-IdentifierReference><code>IdentifierReference : Identifier</code></a></blockquote><p><code>o2</code> is surely an <code>Identifier</code> so we're good. <code>o2</code> is a <code>MemberExpression</code>, so <code>o2.foo</code> is also a <code>MemberExpression</code>. A <code>MemberExpression</code> is a valid <code>AssignmentExpression</code>, so <code>o2.foo</code> is an <code>AssignmentExpression</code> too.</div><footer><div><picture><source srcset="/_img/avatars/marja-holtta.avif, /_img/avatars/marja-holtta@2x.avif 2x" type=image/avif><img alt="" height=96 loading=lazy src=/_img/avatars/marja-holtta.jpg srcset="/_img/avatars/marja-holtta@2x.jpg 2x" width=96></picture><p>作者：<a href=https://twitter.com/marjakh>Marja Hölttä</a>, speculative specification spectator.</div></footer></article></main><footer id=footer><div><nav><a href=https://v8.dev/blog/extras/understanding-ecmascript-part-2-extra>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/blog/extras/understanding-ecmascript-part-2-extra.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>