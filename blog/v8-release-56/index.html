<!doctype html><html lang=zh-CN><meta charset=utf-8><title>V8 release v5.6 · V8</title><meta content="width=device-width,initial-scale=1" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=' js'</script><meta content="V8 v5.6 comes with a new compiler pipeline, performance improvements, and increased support for ECMAScript language features." name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li class=active><a href=/blog/ >博客</a><li><a href=/docs/ >文档</a><li><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline>V8 release v5.6</h1><p class=meta>发布时间 <time datetime="2016-12-02 13:33:37" itemprop=datePublished title="2016-12-02 13:33:37">2016-12-02</time> · 标签： <a href=/blog/tags/release/ class=tag>release</a></header><div itemprop=articleBody><p>Every six weeks, we create a new branch of V8 as part of our <a href=/docs/release-process>release process</a>. Each version is branched from V8’s Git master immediately before a Chrome Beta milestone. Today we’re pleased to announce our newest branch, <a href=https://chromium.googlesource.com/v8/v8.git/+log/branch-heads/5.6>V8 version 5.6</a>, which will be in beta until it is released in coordination with Chrome 56 Stable in several weeks. V8 5.6 is filled with all sorts of developer-facing goodies, so we’d like to give you a preview of some of the highlights in anticipation of the release.<h2 id=ignition-and-turbofan-pipeline-for-es.next-(and-more)-shipped>Ignition and TurboFan pipeline for ES.next (and more) shipped <a href=#ignition-and-turbofan-pipeline-for-es.next-(and-more)-shipped class=bookmark>#</a></h2><p>Starting with 5.6, V8 can optimize the entirety of the JavaScript language. Moreover, many language features are sent through a new optimization pipeline in V8. This pipeline uses V8’s <a href=/blog/ignition-interpreter>Ignition interpreter</a> as a baseline and optimizes frequently executed methods with V8’s more powerful <a href=/docs/turbofan>TurboFan optimizing compiler</a>. The new pipeline activates for new language features (e.g. many of the new features from the ES2015 and ES2016 specifications) or whenever Crankshaft (<a href=https://blog.chromium.org/2010/12/new-crankshaft-for-v8.html>V8’s “classic” optimizing compiler</a>) cannot optimize a method (e.g. try-catch, with).<p>Why are we only routing some JavaScript language features through the new pipeline? The new pipeline is better-suited to optimizing the whole spectrum of the JS language (past and present). It’s a healthier, more modern codebase, and it has been designed specifically for real-world use cases including running V8 on low-memory devices.<p>We’ve started using the Ignition/TurboFan with the newest ES.next features we’ve added to V8 (ES.next = JavaScript features as specified in ES2015 and later) and will route more features through it as we continue improving its performance. In the middle term, the V8 team is aiming to switch all JavaScript execution in V8 to the new pipeline. However, as long as there are still real-world use cases where Crankshaft runs JavaScript faster than the new Ignition/TurboFan pipeline, for the short term we’ll support both pipelines to ensure that JavaScript code running in V8 is as fast as possible in all situations.<p>So, why does the new pipeline use both the new Ignition interpreter and the new TurboFan optimizing compiler? Running JavaScript fast and efficiently requires having multiple mechanisms, or tiers, under the hood in a JavaScript virtual machine to do the low-level busywork of execution. For example, it’s useful to have a first tier that starts executing code quickly, and then a second optimizing tier that spends longer compiling hot functions in order to maximize performance for longer-running code.<p>Ignition and TurboFan are V8’s two new execution tiers that are most effective when used together. Due to efficiency, simplicity and size considerations, TurboFan is designed to optimize JavaScript methods starting from the <a href=https://en.wikipedia.org/wiki/Bytecode>bytecode</a> produced by V8’s Ignition interpreter. By designing both components to work closely together, there are optimizations that can be made to both because of the presence of the other. As a result, starting with 5.6 all functions which will be optimized by TurboFan first run through the Ignition interpreter. Using this unified Ignition/TurboFan pipeline enables the optimization of features that were not optimizable in the past, since they now can take advantage of TurboFan’s optimizations passes. For example, by routing <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*>Generators</a> through both Ignition and TurboFan, Generators runtime performance has nearly tripled.<p>For more information on V8’s journey to adopt Ignition and TurboFan please have a look at <a href=https://benediktmeurer.de/2016/11/25/v8-behind-the-scenes-november-edition/ >Benedikt’s dedicated blog post</a>.<h2 id=performance-improvements>Performance improvements <a href=#performance-improvements class=bookmark>#</a></h2><p>V8 v5.6 delivers a number of key improvements in memory and performance footprint.<h3 id=memory-induced-jank>Memory-induced jank <a href=#memory-induced-jank class=bookmark>#</a></h3><p><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=648568">Concurrent remembered set filtering</a> was introduced: One step more towards <a href=/blog/orinoco>Orinoco</a>.<h3 id=greatly-improved-es2015-performance>Greatly improved ES2015 performance <a href=#greatly-improved-es2015-performance class=bookmark>#</a></h3><p>Developers typically start using new language features with the help of transpilers because of two challenges: backwards-compatibility and performance concerns.<p>V8’s goal is to reduce the performance gap between transpilers and V8’s “native” ES.next performance in order to eliminate the latter challenge. We’ve made great progress in bringing the performance of new language features on-par with their transpiled ES5 equivalents. In this release you will find the performance of ES2015 features is significantly faster than in previous V8 releases, and in some cases ES2015 feature performance is approaching that of transpiled ES5 equivalents.<p>Particularly the <a href=https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator>spread</a> operator should now be ready to be used natively. Instead of writing…<pre class=language-js><code class=language-js><span class="token comment">// Like Math.max, but returns 0 instead of -∞ for no arguments.</span><br><span class="token keyword">function</span> <span class="token function">specialMax</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>…you can now write…<pre class=language-js><code class=language-js><span class="token keyword">function</span> <span class="token function">specialMax</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>…and get similar performance results. In particular V8 v5.6 includes speed-ups for the following micro-benchmarks:<ul><li><a href=https://github.com/fhinkel/six-speed/tree/master/tests/destructuring>destructuring</a><li><a href=https://github.com/fhinkel/six-speed/tree/master/tests/destructuring-array>destructuring-array</a><li><a href=https://github.com/fhinkel/six-speed/tree/master/tests/destructuring-string>destructuring-string</a><li><a href=https://github.com/fhinkel/six-speed/tree/master/tests/for-of-array>for-of-array</a><li><a href=https://github.com/fhinkel/six-speed/tree/master/tests/generator>generator</a><li><a href=https://github.com/fhinkel/six-speed/tree/master/tests/spread>spread</a><li><a href=https://github.com/fhinkel/six-speed/tree/master/tests/spread-generator>spread-generator</a><li><a href=https://github.com/fhinkel/six-speed/tree/master/tests/spread-literal>spread-literal</a></ul><p>See the chart below for a comparison between V8 v5.4 and v5.6.<figure><img alt="" height=709 loading=lazy src=/_img/v8-release-56/perf.png width=1147><figcaption>Comparing the ES2015 feature performance of V8 v5.4 and v5.6 with <a href=https://fhinkel.github.io/six-speed/ >SixSpeed</a></figcaption></figure><p>This is just the beginning; there’s a lot more to follow in upcoming releases!<h2 id=language-features>Language features <a href=#language-features class=bookmark>#</a></h2><h3 id=string.prototype.padstart-%2F-string.prototype.padend><code>String.prototype.padStart</code> / <code>String.prototype.padEnd</code> <a href=#string.prototype.padstart-%2F-string.prototype.padend class=bookmark>#</a></h3><p><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart><code>String.prototype.padStart</code></a> and <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd><code>String.prototype.padEnd</code></a> are the latest stage 4 additions to ECMAScript. These library functions are officially shipped in v5.6.<div class=note><p><strong>Note:</strong> Unshipped again.</div><h2 id=webassembly-browser-preview>WebAssembly browser preview <a href=#webassembly-browser-preview class=bookmark>#</a></h2><p>Chromium 56 (which includes V8 v5.6) is going to ship the WebAssembly browser preview. Please refer to <a href=/blog/webassembly-browser-preview>the dedicated blog post</a> for further information.<h2 id=v8-api>V8 API <a href=#v8-api class=bookmark>#</a></h2><p>Please check out our <a href=https://docs.google.com/document/d/1g8JFi8T_oAE_7uAri7Njtig7fKaPDfotU6huOa1alds/edit>summary of API changes</a>. This document is regularly updated a few weeks after each major release.<p>Developers with an <a href=/docs/source-code#using-git>active V8 checkout</a> can use <code>git checkout -b 5.6 -t branch-heads/5.6</code> to experiment with the new features in V8 v5.6. Alternatively you can <a href=https://www.google.com/chrome/browser/beta.html>subscribe to Chrome’s Beta channel</a> and try the new features out yourself soon.</div><footer><div><p>作者：the V8 team.</div></footer></article></main><footer id=footer><div><nav><a href=https://v8.dev/blog/v8-release-56>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/blog/v8-release-56.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>