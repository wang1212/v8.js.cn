<!doctype html><html lang=zh-CN><meta charset=utf-8><title>Arm debugging with the simulator · V8</title><meta content="width=device-width,initial-scale=1" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=' js'</script><meta content="The Arm simulator and debugger can be very helpful when working with V8 code generation." name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li><a href=/blog/ >博客</a><li class=active><a href=/docs/ >文档</a><li><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><h1>Arm debugging with the simulator</h1><p>The simulator and debugger can be very helpful when working with V8 code generation.<ul><li>It is convenient as it allows you to test code generation without access to actual hardware.<li>No <a href=/docs/cross-compile-arm>cross</a> or native compilation is needed.<li>The simulator fully supports the debugging of generated code.</ul><p>Please note that this simulator is designed for V8 purposes. Only the features used by V8 are implemented, and you might encounter unimplemented features or instructions. In this case, feel free to implement them and submit the code!<ul><li><a href=#compiling>Compiling</a><li><a href=#start_debug>Starting the debugger</a><li><a href=#debug_commands>Debugging commands</a><ul><li><a href=#po>printobject</a><li><a href=#trace>trace</a><li><a href=#break>break</a></ul><li><a href=#extra>Extra breakpoint features</a><ul><li><a href=#arm32_stop>32-bit: <code>stop()</code></a><li><a href=#arm64_debug>64-bit: <code>Debug()</code></a></ul></ul><h2 id=compiling>Compiling for Arm using the simulator <a href=#compiling class=bookmark>#</a></h2><p>By default on an x86 host, compiling for Arm with <a href=/docs/build-gn#gm>gm</a> will give you a simulator build:<pre class=language-bash><code class=language-bash>gm arm64.debug <span class="token comment"># For a 64-bit build or...</span><br>gm arm.debug   <span class="token comment"># ... for a 32-bit build.</span></code></pre><p>You may also build the <code>optdebug</code> configuration as the <code>debug</code> may be a little slow, especially if you want to run the V8 test suite.<h2 id=start_debug>Starting the debugger <a href=#start_debug class=bookmark>#</a></h2><p>You can start the debugger immediately from the command line after <code>n</code> instructions:<pre class=language-bash><code class=language-bash>out/arm64.debug/d8 --stop_sim_at <span class="token operator">&lt;</span>n<span class="token operator">></span> <span class="token comment"># Or out/arm.debug/d8 for a 32-bit build.</span></code></pre><p>Alternatively, you can generate a breakpoint instruction in the generated code:<p>Natively, breakpoint instructions cause the program to halt with a <code>SIGTRAP</code> signal, allowing you to debug the issue with gdb. However, if running with a simulator, a breakpoint instruction in generated code will instead drop you into the simulator debugger.<p>You can generate a breakpoint in multiple ways by using <code>DebugBreak()</code> from <a href=/docs/torque-builtins>Torque</a>, from the <a href=/docs/csa-builtins>CodeStubAssembler</a>, as a node in a <a href=/docs/turbofan>TurboFan</a> pass, or directly using an assembler.<p>Here we focus on debugging low-level native code, so let's look at the assembler method:<pre class=language-cpp><code class=language-cpp><span class="token class-name">TurboAssembler</span><span class="token operator">::</span><span class="token function">DebugBreak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Let's say we have a jitted function called <code>add</code> compiled with <a href=/docs/turbofan>TurboFan</a> and we'd like to break at the start. Given a <code>test.js</code> example:<p id=test.js><pre class=language-js><code class=language-js><span class="token comment">// Our optimized function.</span><br><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Typical cheat code enabled by --allow-natives-syntax.</span><br><span class="token operator">%</span><span class="token function">PrepareFunctionForOptimization</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Give the optimizing compiler type feedback so it'll speculate `a` and `b` are</span><br><span class="token comment">// numbers.</span><br><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// And force it to optimize.</span><br><span class="token operator">%</span><span class="token function">OptimizeFunctionOnNextCall</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>To do it, we can hook into TurboFan's <a href="https://source.chromium.org/chromium/chromium/src/+/master:v8/src/compiler/backend/code-generator.cc?q=CodeGenerator::AssembleCode">code generator</a> and access the assembler to insert our breakpoint:<pre class=language-cpp><code class=language-cpp><span class="token keyword">void</span> <span class="token class-name">CodeGenerator</span><span class="token operator">::</span><span class="token function">AssembleCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// ...</span><br><br>  <span class="token comment">// Check if we're optimizing, then look-up the name of the current function and</span><br>  <span class="token comment">// insert a breakpoint.</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token operator">-></span><span class="token function">IsOptimizing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    AllowHandleDereference allow_handle_dereference<span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token operator">-></span><span class="token function">shared_info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">PassesFilter</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token function">tasm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">DebugBreak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// ...</span><br><span class="token punctuation">}</span></code></pre><p>And let's run it:<pre class=language-simulator><code class=language-simulator><span class="token operator">$</span> d8 \<br>    <span class="token comment"># Enable '%' cheat code JS functions.</span><br>    <span class="token operator">-</span><span class="token operator">-</span>allow<span class="token operator">-</span>natives<span class="token operator">-</span>syntax \<br>    <span class="token comment"># Disassemble our function.</span><br>    <span class="token operator">-</span><span class="token operator">-</span>print<span class="token operator">-</span>opt<span class="token operator">-</span>code <span class="token operator">-</span><span class="token operator">-</span>print<span class="token operator">-</span>opt<span class="token operator">-</span>code<span class="token operator">-</span>filter<span class="token operator">=</span>"add" <span class="token operator">-</span><span class="token operator">-</span>code<span class="token operator">-</span>comments \<br>    <span class="token comment"># Disable spectre mitigations for readability.</span><br>    <span class="token operator">-</span><span class="token operator">-</span>no<span class="token operator">-</span>untrusted<span class="token operator">-</span>code<span class="token operator">-</span>mitigations \<br>    test.js<br><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> Raw source <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><br>(a, b) {<br>  return a <span class="token operator">+</span> b;<br>}<br><br><br><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> Optimized code <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><br>optimization_id <span class="token operator">=</span> <span class="token number">0</span><br>source_position <span class="token operator">=</span> <span class="token number">12</span><br>kind <span class="token operator">=</span> OPTIMIZED_FUNCTION<br>name <span class="token operator">=</span> add<br>stack_slots <span class="token operator">=</span> <span class="token number">6</span><br>compiler <span class="token operator">=</span> turbofan<br>address <span class="token operator">=</span> <span class="token string">0x7f0900082ba1</span><br><br>Instructions (size <span class="token operator">=</span> <span class="token number">504</span>)<br><span class="token string">0x7f0900082be0     0</span>  <span class="token number">d45bd600</span>       constant pool begin (num_const <span class="token operator">=</span> <span class="token number">6</span>)<br><span class="token string">0x7f0900082be4     4</span>  <span class="token number">00000000</span>       constant<br><span class="token string">0x7f0900082be8     8</span>  <span class="token number">00000001</span>       constant<br><span class="token string">0x7f0900082bec     c</span>  <span class="token number">75626544</span>       constant<br><span class="token string">0x7f0900082bf0    10</span>  <span class="token number">65724267</span>       constant<br><span class="token string">0x7f0900082bf4    14</span>  <span class="token number">00006b61</span>       constant<br><span class="token string">0x7f0900082bf8    18</span>  <span class="token number">d45bd7e0</span>       constant<br><span class="token comment">                  -- Prologue: check code start register --</span><br><span class="token string">0x7f0900082bfc    1c</span>  <span class="token number">10ffff30</span>       adr <span class="token register variable">x16</span>, <span class="token number">#-0x1c</span> (addr <span class="token string">0x7f0900082be0</span>)<br><span class="token string">0x7f0900082c00    20</span>  <span class="token number">eb02021f</span>       cmp <span class="token register variable">x16</span>, <span class="token register variable">x2</span><br><span class="token string">0x7f0900082c04    24</span>  <span class="token number">54000080</span>       b.eq <span class="token number">#+0x10</span> (addr <span class="token string">0x7f0900082c14</span>)<br><span class="token comment">                  Abort message:</span><br><span class="token comment">                  Wrong value in code start register passed</span><br><span class="token string">0x7f0900082c08    28</span>  <span class="token number">d2800d01</span>       movz <span class="token register variable">x1</span>, <span class="token number">#0x68</span><br><span class="token comment">                  -- Inlined Trampoline to Abort --</span><br><span class="token string">0x7f0900082c0c    2c</span>  <span class="token number">58000d70</span>       ldr <span class="token register variable">x16</span>, <span class="token register variable">pc</span><span class="token operator">+</span><span class="token number">428</span> (addr <span class="token string">0x00007f0900082db8</span>)    ;; off heap target<br><span class="token string">0x7f0900082c10    30</span>  <span class="token number">d63f0200</span>       blr <span class="token register variable">x16</span><br><span class="token comment">                  -- Prologue: check for deoptimization --</span><br><span class="token comment">                  [ DecompressTaggedPointer</span><br><span class="token string">0x7f0900082c14    34</span>  <span class="token number">b85d0050</span>       ldur <span class="token register variable">w16</span>, <span class="token operator">[</span><span class="token register variable">x2</span>, <span class="token number">#-48</span><span class="token operator">]</span><br><span class="token string">0x7f0900082c18    38</span>  <span class="token number">8b100350</span>       add <span class="token register variable">x16</span>, <span class="token register variable">x26</span>, <span class="token register variable">x16</span><br><span class="token comment">                  ]</span><br><span class="token string">0x7f0900082c1c    3c</span>  <span class="token number">b8407210</span>       ldur <span class="token register variable">w16</span>, <span class="token operator">[</span><span class="token register variable">x16</span>, <span class="token number">#7</span><span class="token operator">]</span><br><span class="token string">0x7f0900082c20    40</span>  <span class="token number">36000070</span>       tbz <span class="token register variable">w16</span>, <span class="token number">#0</span>, <span class="token number">#+0xc</span> (addr <span class="token string">0x7f0900082c2c</span>)<br><span class="token comment">                  -- Inlined Trampoline to CompileLazyDeoptimizedCode --</span><br><span class="token string">0x7f0900082c24    44</span>  <span class="token number">58000c31</span>       ldr <span class="token register variable">x17</span>, <span class="token register variable">pc</span><span class="token operator">+</span><span class="token number">388</span> (addr <span class="token string">0x00007f0900082da8</span>)    ;; off heap target<br><span class="token string">0x7f0900082c28    48</span>  <span class="token number">d61f0220</span>       br <span class="token register variable">x17</span><br><span class="token comment">                  -- B0 start (construct frame) --</span><br>(...)<br><br><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> End code <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><br><span class="token comment"># Debugger hit 0: DebugBreak</span><br><span class="token string">0x00007f0900082bfc</span> <span class="token number">10ffff30</span>            adr <span class="token register variable">x16</span>, <span class="token number">#-0x1c</span> (addr <span class="token string">0x7f0900082be0</span>)<br><span class="token keyword">sim></span></code></pre><p>We can see we've stopped at the start of the optimized function and the simulator gave us a prompt!<p>Note this is just an example and V8 changes quickly so the details may vary. But you should be able to do this anywhere where an assembler is available.<h2 id=debug_commands>Debugging commands <a href=#debug_commands class=bookmark>#</a></h2><h3 id=common-commands>Common commands <a href=#common-commands class=bookmark>#</a></h3><p>Enter <code>help</code> in the debugger prompt to get details on available commands. These include usual gdb-like commands, such as <code>stepi</code>, <code>cont</code>, <code>disasm</code>, etc. If the Simulator is run under gdb, the <code>gdb</code> debugger command will give control to gdb. You can then use <code>cont</code> from gdb to go back to the debugger.<h3 id=architecture-specific-commands>Architecture specific commands <a href=#architecture-specific-commands class=bookmark>#</a></h3><p>Each target architecture implements its own simulator and debugger, so the experience and details will vary.<ul><li><a href=#po>printobject</a><li><a href=#trace>trace</a><li><a href=#break>break</a></ul><h4 id=po><code>printobject $register</code> (alias <code>po</code>) <a href=#po class=bookmark>#</a></h4><p>Describe a JS object held in a register.<p>For example, let's say this time we're running <a href=#test.js>our example</a> on a 32-bit Arm simulator build. We can examine incoming arguments passed in registers:<pre class=language-simulator><code class=language-simulator><span class="token operator">$</span> .<span class="token operator">/</span>out<span class="token operator">/</span>arm.debug<span class="token operator">/</span>d8 <span class="token operator">-</span><span class="token operator">-</span>allow<span class="token operator">-</span>natives<span class="token operator">-</span>syntax test.js<br>Simulator hit stop, breaking at the next instruction:<br>  <span class="token string">0x26842e24</span>  <span class="token number">e24fc00c</span>       sub <span class="token register variable">ip</span>, <span class="token register variable">pc</span>, <span class="token number">#12</span><br><span class="token keyword">sim></span> print <span class="token register variable">r1</span><br><span class="token function label">r1:</span> <span class="token string">0x4b60ffb1</span> <span class="token number">1264648113</span><br><span class="token comment"># The current function object is passed with r1.</span><br><span class="token keyword">sim></span> printobject <span class="token register variable">r1</span><br><span class="token function label">r1:</span><br><span class="token string">0x4b60ffb1</span>: <span class="token operator">[</span>Function<span class="token operator">]</span> in OldSpace<br> <span class="token operator">-</span> map: <span class="token string">0x485801f9</span> <span class="token operator">&lt;</span>Map(HOLEY_ELEMENTS)<span class="token operator">></span> <span class="token operator">[</span>FastProperties<span class="token operator">]</span><br> <span class="token operator">-</span> prototype: <span class="token string">0x4b6010f1</span> <span class="token operator">&lt;</span>JSFunction (sfi <span class="token operator">=</span> <span class="token string">0x42404e99</span>)<span class="token operator">></span><br> <span class="token operator">-</span> elements: <span class="token string">0x5b700661</span> <span class="token operator">&lt;</span>FixedArray<span class="token operator">[</span><span class="token number">0</span><span class="token operator">]</span><span class="token operator">></span> <span class="token operator">[</span>HOLEY_ELEMENTS<span class="token operator">]</span><br> <span class="token operator">-</span> function prototype:<br> <span class="token operator">-</span> initial_map:<br> <span class="token operator">-</span> shared_info: <span class="token string">0x4b60fe9d</span> <span class="token operator">&lt;</span>SharedFunctionInfo add<span class="token operator">></span><br> <span class="token operator">-</span> name: <span class="token string">0x5b701c5d</span> <span class="token operator">&lt;</span>String<span class="token operator">[</span><span class="token number">#3</span><span class="token operator">]</span>: add<span class="token operator">></span><br> <span class="token operator">-</span> formal_parameter_count: <span class="token number">2</span><br> <span class="token operator">-</span> kind: NormalFunction<br> <span class="token operator">-</span> context: <span class="token string">0x4b600c65</span> <span class="token operator">&lt;</span>NativeContext<span class="token operator">[</span><span class="token number">261</span><span class="token operator">]</span><span class="token operator">></span><br> <span class="token operator">-</span> code: <span class="token string">0x26842de1</span> <span class="token operator">&lt;</span>Code OPTIMIZED_FUNCTION<span class="token operator">></span><br> <span class="token operator">-</span> source code: (a, b) {<br>  return a <span class="token operator">+</span> b;<br>}<br>(...)<br><br><span class="token comment"># Now print the current JS context passed in r7.</span><br><span class="token keyword">sim></span> printobject <span class="token register variable">r7</span><br><span class="token function label">r7:</span><br><span class="token string">0x449c0c65</span>: <span class="token operator">[</span>NativeContext<span class="token operator">]</span> in OldSpace<br> <span class="token operator">-</span> map: <span class="token string">0x561000b9</span> <span class="token operator">&lt;</span>Map<span class="token operator">></span><br> <span class="token operator">-</span> length: <span class="token number">261</span><br> <span class="token operator">-</span> scope_info: <span class="token string">0x34081341</span> <span class="token operator">&lt;</span>ScopeInfo SCRIPT_SCOPE <span class="token operator">[</span><span class="token number">5</span><span class="token operator">]</span><span class="token operator">></span><br> <span class="token operator">-</span> previous: <span class="token number">0</span><br> <span class="token operator">-</span> native_context: <span class="token string">0x449c0c65</span> <span class="token operator">&lt;</span>NativeContext<span class="token operator">[</span><span class="token number">261</span><span class="token operator">]</span><span class="token operator">></span><br>           <span class="token number">0</span>: <span class="token string">0x34081341</span> <span class="token operator">&lt;</span>ScopeInfo SCRIPT_SCOPE <span class="token operator">[</span><span class="token number">5</span><span class="token operator">]</span><span class="token operator">></span><br>           <span class="token number">1</span>: <span class="token number">0</span><br>           <span class="token number">2</span>: <span class="token string">0x449cdaf5</span> <span class="token operator">&lt;</span>JSObject<span class="token operator">></span><br>           <span class="token number">3</span>: <span class="token string">0x58480c25</span> <span class="token operator">&lt;</span>JSGlobal Object<span class="token operator">></span><br>           <span class="token number">4</span>: <span class="token string">0x58485499</span> <span class="token operator">&lt;</span>Other heap object (EMBEDDER_DATA_ARRAY_TYPE)<span class="token operator">></span><br>           <span class="token number">5</span>: <span class="token string">0x561018a1</span> <span class="token operator">&lt;</span>Map(HOLEY_ELEMENTS)<span class="token operator">></span><br>           <span class="token number">6</span>: <span class="token string">0x3408027d</span> <span class="token operator">&lt;</span>undefined<span class="token operator">></span><br>           <span class="token number">7</span>: <span class="token string">0x449c75c1</span> <span class="token operator">&lt;</span>JSFunction ArrayBuffer (sfi <span class="token operator">=</span> <span class="token string">0x4be8ade1</span>)<span class="token operator">></span><br>           <span class="token number">8</span>: <span class="token string">0x561010f9</span> <span class="token operator">&lt;</span>Map(HOLEY_ELEMENTS)<span class="token operator">></span><br>           <span class="token number">9</span>: <span class="token string">0x449c967d</span> <span class="token operator">&lt;</span>JSFunction arrayBufferConstructor_DoNotInitialize (sfi <span class="token operator">=</span> <span class="token string">0x4be8c3ed</span>)<span class="token operator">></span><br>          <span class="token number">10</span>: <span class="token string">0x449c8dbd</span> <span class="token operator">&lt;</span>JSFunction Array (sfi <span class="token operator">=</span> <span class="token string">0x4be8be59</span>)<span class="token operator">></span><br>(...)</code></pre><h4 id=trace><code>trace</code> (alias <code>t</code>) <a href=#trace class=bookmark>#</a></h4><p>Enable or disable tracing executed instructions.<p>When enabled, the simulator will print disassembled instructions as it is executing them. If you're running a 64-bit Arm build, the simulator is also able to trace changes to register values.<p>You may also enable this from the command-line with the <code>--trace-sim</code> flag to enable tracing from the start.<p>With the same <a href=#test.js>example</a>:<pre class=language-simulator><code class=language-simulator><span class="token operator">$</span> out<span class="token operator">/</span>arm64.debug<span class="token operator">/</span>d8 <span class="token operator">-</span><span class="token operator">-</span>allow<span class="token operator">-</span>natives<span class="token operator">-</span>syntax \<br>    <span class="token comment"># --debug-sim is required on 64-bit Arm to enable disassembly</span><br>    <span class="token comment"># when tracing.</span><br>    <span class="token operator">-</span><span class="token operator">-</span>debug<span class="token operator">-</span>sim test.js<br><span class="token comment"># Debugger hit 0: DebugBreak</span><br><span class="token string">0x00007f1e00082bfc</span>  <span class="token number">10ffff30</span>            adr <span class="token register variable">x16</span>, <span class="token number">#-0x1c</span> (addr <span class="token string">0x7f1e00082be0</span>)<br><span class="token keyword">sim></span> trace<br><span class="token string">0x00007f1e00082bfc</span>  <span class="token number">10ffff30</span>            adr <span class="token register variable">x16</span>, <span class="token number">#-0x1c</span> (addr <span class="token string">0x7f1e00082be0</span>)<br>Enabling disassembly, registers and memory write tracing<br><br><span class="token comment"># Break on the return address stored in the lr register.</span><br><span class="token keyword">sim></span> break <span class="token register variable">lr</span><br>Set a breakpoint at <span class="token string">0x7f1f880abd28</span><br><span class="token string">0x00007f1e00082bfc</span>  <span class="token number">10ffff30</span>            adr <span class="token register variable">x16</span>, <span class="token number">#-0x1c</span> (addr <span class="token string">0x7f1e00082be0</span>)<br><br><span class="token comment"># Continuing will trace the function's execution until we return, allowing</span><br><span class="token comment"># us to make sense of what is happening.</span><br><span class="token keyword">sim></span> continue<br><span class="token comment">#    x0: 0x00007f1e00082ba1</span><br><span class="token comment">#    x1: 0x00007f1e08250125</span><br><span class="token comment">#    x2: 0x00007f1e00082be0</span><br>(...)<br><br><span class="token comment"># We first load the 'a' and 'b' arguments from the stack and check if they</span><br><span class="token comment"># are tagged numbers. This is indicated by the least significant bit being 0.</span><br><span class="token string">0x00007f1e00082c90</span>  <span class="token number">f9401fe2</span>            ldr <span class="token register variable">x2</span>, <span class="token operator">[</span><span class="token register variable">sp</span>, <span class="token number">#56</span><span class="token operator">]</span><br><span class="token comment">#    x2: 0x000000000000000a &lt;- 0x00007f1f821f0278</span><br><span class="token string">0x00007f1e00082c94</span>  <span class="token number">7200005f</span>            tst <span class="token register variable">w2</span>, <span class="token number">#0x1</span><br><span class="token comment"># NZCV: N:0 Z:1 C:0 V:0</span><br><span class="token string">0x00007f1e00082c98</span>  <span class="token number">54000ac1</span>            b.ne <span class="token number">#+0x158</span> (addr <span class="token string">0x7f1e00082df0</span>)<br><span class="token string">0x00007f1e00082c9c</span>  <span class="token number">f9401be3</span>            ldr <span class="token register variable">x3</span>, <span class="token operator">[</span><span class="token register variable">sp</span>, <span class="token number">#48</span><span class="token operator">]</span><br><span class="token comment">#    x3: 0x000000000000000e &lt;- 0x00007f1f821f0270</span><br><span class="token string">0x00007f1e00082ca0</span>  <span class="token number">7200007f</span>            tst <span class="token register variable">w3</span>, <span class="token number">#0x1</span><br><span class="token comment"># NZCV: N:0 Z:1 C:0 V:0</span><br><span class="token string">0x00007f1e00082ca4</span>  <span class="token number">54000a81</span>            b.ne <span class="token number">#+0x150</span> (addr <span class="token string">0x7f1e00082df4</span>)<br><br><span class="token comment"># Then we untag and add 'a' and 'b' together.</span><br><span class="token string">0x00007f1e00082ca8</span>  <span class="token number">13017c44</span>            asr <span class="token register variable">w4</span>, <span class="token register variable">w2</span>, <span class="token number">#1</span><br><span class="token comment">#    x4: 0x0000000000000005</span><br><span class="token string">0x00007f1e00082cac</span>  <span class="token number">2b830484</span>            adds <span class="token register variable">w4</span>, <span class="token register variable">w4</span>, <span class="token register variable">w3</span>, asr <span class="token number">#1</span><br><span class="token comment"># NZCV: N:0 Z:0 C:0 V:0</span><br><span class="token comment">#    x4: 0x000000000000000c</span><br><span class="token comment"># That's 5 + 7 == 12, all good!</span><br><br><span class="token comment"># Then we check for overflows and tag the result again.</span><br><span class="token string">0x00007f1e00082cb0</span>  <span class="token number">54000a46</span>            b.vs <span class="token number">#+0x148</span> (addr <span class="token string">0x7f1e00082df8</span>)<br><span class="token string">0x00007f1e00082cb4</span>  <span class="token number">2b040082</span>            adds <span class="token register variable">w2</span>, <span class="token register variable">w4</span>, <span class="token register variable">w4</span><br><span class="token comment"># NZCV: N:0 Z:0 C:0 V:0</span><br><span class="token comment">#    x2: 0x0000000000000018</span><br><span class="token string">0x00007f1e00082cb8</span>  <span class="token number">54000466</span>            b.vs <span class="token number">#+0x8c</span> (addr <span class="token string">0x7f1e00082d44</span>)<br><br><br><span class="token comment"># And finally we place the result in x0.</span><br><span class="token string">0x00007f1e00082cbc</span>  <span class="token number">aa0203e0</span>            mov <span class="token register variable">x0</span>, <span class="token register variable">x2</span><br><span class="token comment">#    x0: 0x0000000000000018</span><br>(...)<br><br><span class="token string">0x00007f1e00082cec</span>  <span class="token number">d65f03c0</span>            ret<br>Hit and disabled a breakpoint at <span class="token string">0x7f1f880abd28</span>.<br><span class="token string">0x00007f1f880abd28</span>  <span class="token number">f85e83b4</span>            ldur <span class="token register variable">x20</span>, <span class="token operator">[</span><span class="token register variable">fp</span>, <span class="token number">#-24</span><span class="token operator">]</span><br><span class="token keyword">sim></span></code></pre><h4 id=break><code>break $address</code> <a href=#break class=bookmark>#</a></h4><p>Inserts a breakpoint at the specified address.<p>Note that on 32-bit Arm, you can have only one breakpoint and you'll need to disable write protection on code pages to insert it. The 64-bit Arm simulator does not have such restrictions.<p>With our <a href=#test.js>example</a> again:<pre class=language-simulator><code class=language-simulator><span class="token operator">$</span> out<span class="token operator">/</span>arm.debug<span class="token operator">/</span>d8 <span class="token operator">-</span><span class="token operator">-</span>allow<span class="token operator">-</span>natives<span class="token operator">-</span>syntax \<br>    <span class="token comment"># This is useful to know which address to break to.</span><br>    <span class="token operator">-</span><span class="token operator">-</span>print<span class="token operator">-</span>opt<span class="token operator">-</span>code <span class="token operator">-</span><span class="token operator">-</span>print<span class="token operator">-</span>opt<span class="token operator">-</span>code<span class="token operator">-</span>filter<span class="token operator">=</span>"add" \<br>    test.js<br>(...)<br><br>Simulator hit stop, breaking at the next instruction:<br>  <span class="token string">0x488c2e20</span>  <span class="token number">e24fc00c</span>       sub <span class="token register variable">ip</span>, <span class="token register variable">pc</span>, <span class="token number">#12</span><br><br><span class="token comment"># Break on a known interesting address, where we start</span><br><span class="token comment"># loading 'a' and 'b'.</span><br><span class="token keyword">sim></span> break <span class="token string">0x488c2e9c</span><br><span class="token keyword">sim></span> continue<br>  <span class="token string">0x488c2e9c</span>  <span class="token number">e59b200c</span>       ldr <span class="token register variable">r2</span>, <span class="token operator">[</span><span class="token register variable">fp</span>, <span class="token number">#+12</span><span class="token operator">]</span><br><br><span class="token comment"># We can look-ahead with 'disasm'.</span><br><span class="token keyword">sim></span> disasm <span class="token number">10</span><br>  <span class="token string">0x488c2e9c</span>  <span class="token number">e59b200c</span>       ldr <span class="token register variable">r2</span>, <span class="token operator">[</span><span class="token register variable">fp</span>, <span class="token number">#+12</span><span class="token operator">]</span><br>  <span class="token string">0x488c2ea0</span>  <span class="token number">e3120001</span>       tst <span class="token register variable">r2</span>, <span class="token number">#1</span><br>  <span class="token string">0x488c2ea4</span>  <span class="token number">1a000037</span>       bne <span class="token operator">+</span><span class="token number">228</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">0x488c2f88</span><br>  <span class="token string">0x488c2ea8</span>  <span class="token number">e59b3008</span>       ldr <span class="token register variable">r3</span>, <span class="token operator">[</span><span class="token register variable">fp</span>, <span class="token number">#+8</span><span class="token operator">]</span><br>  <span class="token string">0x488c2eac</span>  <span class="token number">e3130001</span>       tst <span class="token register variable">r3</span>, <span class="token number">#1</span><br>  <span class="token string">0x488c2eb0</span>  <span class="token number">1a000037</span>       bne <span class="token operator">+</span><span class="token number">228</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">0x488c2f94</span><br>  <span class="token string">0x488c2eb4</span>  <span class="token number">e1a040c2</span>       mov <span class="token register variable">r4</span>, <span class="token register variable">r2</span>, asr <span class="token number">#1</span><br>  <span class="token string">0x488c2eb8</span>  <span class="token number">e09440c3</span>       adds <span class="token register variable">r4</span>, <span class="token register variable">r4</span>, <span class="token register variable">r3</span>, asr <span class="token number">#1</span><br>  <span class="token string">0x488c2ebc</span>  <span class="token number">6a000037</span>       bvs <span class="token operator">+</span><span class="token number">228</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">0x488c2fa0</span><br>  <span class="token string">0x488c2ec0</span>  <span class="token number">e0942004</span>       adds <span class="token register variable">r2</span>, <span class="token register variable">r4</span>, <span class="token register variable">r4</span><br><br><span class="token comment"># And try and break on the result of the first `adds` instructions.</span><br><span class="token keyword">sim></span> break <span class="token string">0x488c2ebc</span><br>setting breakpoint failed<br><br><span class="token comment"># Ah, we need to delete the breakpoint first.</span><br><span class="token keyword">sim></span> del<br><span class="token keyword">sim></span> break <span class="token string">0x488c2ebc</span><br><span class="token keyword">sim></span> cont<br>  <span class="token string">0x488c2ebc</span>  <span class="token number">6a000037</span>       bvs <span class="token operator">+</span><span class="token number">228</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">0x488c2fa0</span><br><br><span class="token keyword">sim></span> print <span class="token register variable">r4</span><br><span class="token function label">r4:</span> <span class="token string">0x0000000c</span> <span class="token number">12</span><br><span class="token comment"># That's 5 + 7 == 12, all good!</span></code></pre><h3 id=extra>Generated breakpoint instuctions with a few additional features <a href=#extra class=bookmark>#</a></h3><p>Instead of <code>TurboAssembler::DebugBreak()</code>, you may use a lower-level instruction which has the same effect except with additional features.<ul><li><a href=#arm32_stop>32-bit: <code>stop()</code></a><li><a href=#arm64_debug>64-bit: <code>Debug()</code></a></ul><h4 id=arm32_stop><code>stop()</code> (32-bit Arm) <a href=#arm32_stop class=bookmark>#</a></h4><pre class=language-cpp><code class=language-cpp><span class="token class-name">Assembler</span><span class="token operator">::</span><span class="token function">stop</span><span class="token punctuation">(</span>Condition cond <span class="token operator">=</span> al<span class="token punctuation">,</span> <span class="token keyword">int32_t</span> code <span class="token operator">=</span> kDefaultStopCode<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The first argument is the condition and the second is the stop code. If a code is specified, and is less than 256, the stop is said to be “watched”, and can be disabled/enabled; a counter also keeps track of how many times the Simulator hits this code.<p>Imagine we are working on this V8 C++ code:<pre class=language-cpp><code class=language-cpp>__ <span class="token function">stop</span><span class="token punctuation">(</span>al<span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r0<span class="token punctuation">,</span> r0<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r0<span class="token punctuation">,</span> r0<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r0<span class="token punctuation">,</span> r0<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r0<span class="token punctuation">,</span> r0<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r0<span class="token punctuation">,</span> r0<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">stop</span><span class="token punctuation">(</span>al<span class="token punctuation">,</span> <span class="token number">0x1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> r1<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> r1<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> r1<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> r1<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">mov</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> r1<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Here's a sample debugging session:<p>We hit the first stop.<pre class=language-simulator><code class=language-simulator>Simulator hit stop <span class="token number">123</span>, breaking at the next instruction:<br>  <span class="token string">0xb53559e8</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r0</span>, <span class="token register variable">r0</span></code></pre><p>We can see the following stop using <code>disasm</code>.<pre class=language-simulator><code class=language-simulator><span class="token keyword">sim></span> disasm<br>  <span class="token string">0xb53559e8</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r0</span>, <span class="token register variable">r0</span><br>  <span class="token string">0xb53559ec</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r0</span>, <span class="token register variable">r0</span><br>  <span class="token string">0xb53559f0</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r0</span>, <span class="token register variable">r0</span><br>  <span class="token string">0xb53559f4</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r0</span>, <span class="token register variable">r0</span><br>  <span class="token string">0xb53559f8</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r0</span>, <span class="token register variable">r0</span><br>  <span class="token string">0xb53559fc</span>  <span class="token number">ef800001</span>       stop <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">0x1</span><br>  <span class="token string">0xb5355a00</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r1</span>, <span class="token register variable">r1</span><br>  <span class="token string">0xb5355a04</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r1</span>, <span class="token register variable">r1</span><br>  <span class="token string">0xb5355a08</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r1</span>, <span class="token register variable">r1</span></code></pre><p>Information can be printed for all (watched) stops which were hit at least once.<pre class=language-simulator><code class=language-simulator><span class="token keyword">sim></span> stop info all<br>Stop information:<br>stop <span class="token number">123</span> <span class="token operator">-</span> <span class="token number">0x7b</span>:      Enabled,      counter <span class="token operator">=</span> <span class="token number">1</span><br><span class="token keyword">sim></span> cont<br>Simulator hit stop <span class="token number">1</span>, breaking at the next instruction:<br>  <span class="token string">0xb5355a04</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r1</span>, <span class="token register variable">r1</span><br><span class="token keyword">sim></span> stop info all<br>Stop information:<br>stop <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">0x1</span>:         Enabled,      counter <span class="token operator">=</span> <span class="token number">1</span><br>stop <span class="token number">123</span> <span class="token operator">-</span> <span class="token number">0x7b</span>:      Enabled,      counter <span class="token operator">=</span> <span class="token number">1</span></code></pre><p>Stops can be disabled or enabled. (Only available for watched stops.)<pre class=language-simulator><code class=language-simulator><span class="token keyword">sim></span> stop disable <span class="token number">1</span><br><span class="token keyword">sim></span> cont<br>Simulator hit stop <span class="token number">123</span>, breaking at the next instruction:<br>  <span class="token string">0xb5356808</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r0</span>, <span class="token register variable">r0</span><br><span class="token keyword">sim></span> cont<br>Simulator hit stop <span class="token number">123</span>, breaking at the next instruction:<br>  <span class="token string">0xb5356c28</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r0</span>, <span class="token register variable">r0</span><br><span class="token keyword">sim></span> stop info all<br>Stop information:<br>stop <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">0x1</span>:         Disabled,     counter <span class="token operator">=</span> <span class="token number">2</span><br>stop <span class="token number">123</span> <span class="token operator">-</span> <span class="token number">0x7b</span>:      Enabled,      counter <span class="token operator">=</span> <span class="token number">3</span><br><span class="token keyword">sim></span> stop enable <span class="token number">1</span><br><span class="token keyword">sim></span> cont<br>Simulator hit stop <span class="token number">1</span>, breaking at the next instruction:<br>  <span class="token string">0xb5356c44</span>  <span class="token number">e1a00000</span>       mov <span class="token register variable">r1</span>, <span class="token register variable">r1</span><br><span class="token keyword">sim></span> stop disable all<br><span class="token keyword">sim></span> con</code></pre><h4 id=arm64_debug><code>Debug()</code> (64-bit Arm) <a href=#arm64_debug class=bookmark>#</a></h4><pre class=language-cpp><code class=language-cpp><span class="token class-name">MacroAssembler</span><span class="token operator">::</span><span class="token function">Debug</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> message<span class="token punctuation">,</span> <span class="token keyword">uint32_t</span> code<span class="token punctuation">,</span> Instr params <span class="token operator">=</span> BREAK<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>This instruction is a breakpoint by default, but is also able to enable and disable tracing as if you had done it with the <a href=#trace><code>trace</code></a> command in the debugger. You can also give it a message and a code as an identifier.<p>Imagine we are working on this V8 C++ code, taken from the native builtin that prepares the frame to call a JS function.<pre class=language-cpp><code class=language-cpp><span class="token keyword">int64_t</span> bad_frame_pointer <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1L</span><span class="token punctuation">;</span>  <span class="token comment">// Bad frame pointer, should fail if it is used.</span><br>__ <span class="token function">Mov</span><span class="token punctuation">(</span>x13<span class="token punctuation">,</span> bad_frame_pointer<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">Mov</span><span class="token punctuation">(</span>x12<span class="token punctuation">,</span> <span class="token class-name">StackFrame</span><span class="token operator">::</span><span class="token function">TypeToMarker</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">Mov</span><span class="token punctuation">(</span>x11<span class="token punctuation">,</span> <span class="token class-name">ExternalReference</span><span class="token operator">::</span><span class="token function">Create</span><span class="token punctuation">(</span>IsolateAddressId<span class="token operator">::</span>kCEntryFPAddress<span class="token punctuation">,</span><br>                                      masm<span class="token operator">-></span><span class="token function">isolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">Ldr</span><span class="token punctuation">(</span>x10<span class="token punctuation">,</span> <span class="token function">MemOperand</span><span class="token punctuation">(</span>x11<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>__ <span class="token function">Push</span><span class="token punctuation">(</span>x13<span class="token punctuation">,</span> x12<span class="token punctuation">,</span> xzr<span class="token punctuation">,</span> x10<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>It might be useful to insert a breakpoint with <code>DebugBreak()</code> so we can examine the current state when we run this. But we can go further and trace this code if we use <code>Debug()</code> instead:<pre class=language-cpp><code class=language-cpp><span class="token comment">// Start tracing and log disassembly and register values.</span><br>__ <span class="token function">Debug</span><span class="token punctuation">(</span><span class="token string">"start tracing"</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> TRACE_ENABLE <span class="token operator">|</span> LOG_ALL<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">int64_t</span> bad_frame_pointer <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1L</span><span class="token punctuation">;</span>  <span class="token comment">// Bad frame pointer, should fail if it is used.</span><br>__ <span class="token function">Mov</span><span class="token punctuation">(</span>x13<span class="token punctuation">,</span> bad_frame_pointer<span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">Mov</span><span class="token punctuation">(</span>x12<span class="token punctuation">,</span> <span class="token class-name">StackFrame</span><span class="token operator">::</span><span class="token function">TypeToMarker</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">Mov</span><span class="token punctuation">(</span>x11<span class="token punctuation">,</span> <span class="token class-name">ExternalReference</span><span class="token operator">::</span><span class="token function">Create</span><span class="token punctuation">(</span>IsolateAddressId<span class="token operator">::</span>kCEntryFPAddress<span class="token punctuation">,</span><br>                                      masm<span class="token operator">-></span><span class="token function">isolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>__ <span class="token function">Ldr</span><span class="token punctuation">(</span>x10<span class="token punctuation">,</span> <span class="token function">MemOperand</span><span class="token punctuation">(</span>x11<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>__ <span class="token function">Push</span><span class="token punctuation">(</span>x13<span class="token punctuation">,</span> x12<span class="token punctuation">,</span> xzr<span class="token punctuation">,</span> x10<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Stop tracing.</span><br>__ <span class="token function">Debug</span><span class="token punctuation">(</span><span class="token string">"stop tracing"</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> TRACE_DISABLE<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>It allows us to trace register values for <strong>just</strong> the snippet of code we're working on:<pre class=language-simulator><code class=language-simulator><span class="token operator">$</span> d8 <span class="token operator">-</span><span class="token operator">-</span>allow<span class="token operator">-</span>natives<span class="token operator">-</span>syntax <span class="token operator">-</span><span class="token operator">-</span>debug<span class="token operator">-</span>sim test.js<br><span class="token comment"># NZCV: N:0 Z:0 C:0 V:0</span><br><span class="token comment"># FPCR: AHP:0 DN:0 FZ:0 RMode:0b00 (Round to Nearest)</span><br><span class="token comment">#    x0: 0x00007fbf00000000</span><br><span class="token comment">#    x1: 0x00007fbf0804030d</span><br><span class="token comment">#    x2: 0x00007fbf082500e1</span><br>(...)<br><br><span class="token string">0x00007fc039d31cb0</span>  <span class="token number">9280000d</span>            movn <span class="token register variable">x13</span>, <span class="token number">#0x0</span><br><span class="token comment">#   x13: 0xffffffffffffffff</span><br><span class="token string">0x00007fc039d31cb4</span>  <span class="token number">d280004c</span>            movz <span class="token register variable">x12</span>, <span class="token number">#0x2</span><br><span class="token comment">#   x12: 0x0000000000000002</span><br><span class="token string">0x00007fc039d31cb8</span>  <span class="token number">d2864110</span>            movz <span class="token register variable">x16</span>, <span class="token number">#0x3208</span><br><span class="token comment">#   ip0: 0x0000000000003208</span><br><span class="token string">0x00007fc039d31cbc</span>  <span class="token number">8b10034b</span>            add <span class="token register variable">x11</span>, <span class="token register variable">x26</span>, <span class="token register variable">x16</span><br><span class="token comment">#   x11: 0x00007fbf00003208</span><br><span class="token string">0x00007fc039d31cc0</span>  <span class="token number">f940016a</span>            ldr <span class="token register variable">x10</span>, <span class="token operator">[</span><span class="token register variable">x11</span><span class="token operator">]</span><br><span class="token comment">#   x10: 0x0000000000000000 &lt;- 0x00007fbf00003208</span><br><span class="token string">0x00007fc039d31cc4</span>  <span class="token number">a9be7fea</span>            stp <span class="token register variable">x10</span>, <span class="token register variable">xzr</span>, <span class="token operator">[</span><span class="token register variable">sp</span>, <span class="token number">#-32</span><span class="token operator">]</span><span class="token operator">!</span><br><span class="token comment">#    sp: 0x00007fc033e81340</span><br><span class="token comment">#   x10: 0x0000000000000000 -> 0x00007fc033e81340</span><br><span class="token comment">#   xzr: 0x0000000000000000 -> 0x00007fc033e81348</span><br><span class="token string">0x00007fc039d31cc8</span>  <span class="token number">a90137ec</span>            stp <span class="token register variable">x12</span>, <span class="token register variable">x13</span>, <span class="token operator">[</span><span class="token register variable">sp</span>, <span class="token number">#16</span><span class="token operator">]</span><br><span class="token comment">#   x12: 0x0000000000000002 -> 0x00007fc033e81350</span><br><span class="token comment">#   x13: 0xffffffffffffffff -> 0x00007fc033e81358</span><br><span class="token string">0x00007fc039d31ccc</span>  <span class="token number">910063fd</span>            add <span class="token register variable">fp</span>, <span class="token register variable">sp</span>, <span class="token number">#0x18</span> (<span class="token number">24</span>)<br><span class="token comment">#    fp: 0x00007fc033e81358</span><br><span class="token string">0x00007fc039d31cd0</span>  <span class="token number">d45bd600</span>            hlt <span class="token number">#0xdeb0</span></code></pre></main><footer id=footer><div><nav><a href=https://v8.dev/docs/debug-arm>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/docs/debug-arm.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>