<!doctype html><html lang=zh-CN><meta charset=utf-8><title>Runtime Call Stats · V8</title><meta content="width=device-width,initial-scale=1" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=' js'</script><meta content="This document explains how to use Runtime Call Stats to get detailed V8-internal metrics." name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li><a href=/blog/ >博客</a><li class=active><a href=/docs/ >文档</a><li><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><h1>Runtime Call Stats</h1><p><a href=https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/ >The DevTools Performance panel</a> gives insights into your web app’s runtime performance by visualizing various Chrome-internal metrics. However, certain low-level V8 metrics aren’t currently exposed in DevTools. This article guides you through the most robust way of gathering detailed V8-internal metrics, known as Runtime Call Stats or RCS, through <code>chrome://tracing</code>.<p>Tracing records the behavior of the entire browser, including other tabs, windows, and extensions, so it works best when done in a clean user profile, with extensions disabled, and with no other browser tabs open:<pre class=language-bash><code class=language-bash><span class="token comment"># Start a new Chrome browser session with a clean user profile and extensions disabled</span><br>google-chrome --user-data-dir<span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span>mktemp -d<span class="token variable">)</span></span>"</span> --disable-extensions</code></pre><p>Type the URL of the page you want to measure in the first tab, but do not load the page yet.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/01.png srcset="/_img/rcs/01@2x.png 2x" width=809></figure><p>Add a second tab and open <code>chrome://tracing</code>. Tip: you can just enter <code>chrome:tracing</code>, without the slashes.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/02.png srcset="/_img/rcs/02@2x.png 2x" width=809></figure><p>Click on the “Record” button to prepare recording a trace. First choose “Web developer” and then select “Edit categories”.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/03.png srcset="/_img/rcs/03@2x.png 2x" width=809></figure><p>Select <code>v8.runtime_stats</code> from the list. Depending on how detailed your investigation is, you may select other categories as well.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/04.png srcset="/_img/rcs/04@2x.png 2x" width=809></figure><p>Press “Record” and switch back to the first tab and load the page. The fastest way is to use <kbd>Ctrl</kbd>/<kbd>⌘</kbd>+<kbd>1</kbd> to directly jump to the first tab and then press <kbd>Enter</kbd> to accept the entered URL.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/05.png srcset="/_img/rcs/05@2x.png 2x" width=809></figure><p>Wait until your page has completed loading or the buffer is full, then “Stop” the recording.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/06.png srcset="/_img/rcs/06@2x.png 2x" width=809></figure><p>Look for a “Renderer” section that contains the web page title from the recorded tab. The easiest way to do this is by clicking “Processes”, then clicking “None” to uncheck all entries, and then selecting only the renderer you’re interested in.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/07.png srcset="/_img/rcs/07@2x.png 2x" width=809></figure><p>Select the trace events/slices by pressing <kbd>Shift</kbd> and dragging. Make sure you cover <em>all</em> the sections, including <code>CrRendererMain</code> and any <code>ThreadPoolForegroundWorker</code>s. A table with all the selected slices appears at the bottom.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/08.png srcset="/_img/rcs/08@2x.png 2x" width=809></figure><p>Scroll to the top right of the table and click on the link next to “Runtime call stats table”.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/09.png srcset="/_img/rcs/09@2x.png 2x" width=809></figure><p>In the view that appears, scroll to the bottom to see a detailed table of where V8 spends its time.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/10.png srcset="/_img/rcs/10@2x.png 2x" width=809></figure><p>By flipping open a category you can further drill down into the data.<figure><img alt="" height=545 loading=lazy src=/_img/rcs/11.png srcset="/_img/rcs/11@2x.png 2x" width=809></figure><h2 id=cli>Command-line interface <a href=#cli class=bookmark>#</a></h2><p>Run <a href=/docs/d8><code>d8</code></a> with <code>--runtime-call-stats</code> to get RCS metrics from the command-line:<pre class=language-bash><code class=language-bash>d8 --runtime-call-stats foo.js</code></pre></main><footer id=footer><div><nav><a href=https://v8.dev/docs/rcs>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/docs/rcs.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>