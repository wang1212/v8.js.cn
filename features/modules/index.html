<!doctype html><html lang=zh-CN><meta charset=utf-8><title>JavaScript modules · V8</title><meta content="width=device-width,initial-scale=1" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/_css/feature-support.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=' js'</script><meta content="This article explains how to use JavaScript modules, how to deploy them responsibly, and how the Chrome team is working to make modules even better in the future." name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li><a href=/blog/ >博客</a><li><a href=/docs/ >文档</a><li class=current><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline>JavaScript modules</h1><p class=meta>发布时间 <time datetime="2018-06-18 00:00:00" itemprop=datePublished>2018-06-18</time> · 标签： <a href=/features/tags/ecmascript class=tag>ECMAScript</a> <a href=/features/tags/es2015 class=tag>ES2015</a></header><div itemprop=articleBody><p>JavaScript modules are now <a href="https://caniuse.com/#feat=es6-module">supported in all major browsers</a>!<ul class=feature-support><li class="environment has-support"><span class="icon chrome">Chrome:</span> <span class=support>自 <span class=version>61</span> 版本开始支持</span><li class="environment has-support"><span class="icon firefox">Firefox:</span> <span class=support>自 <span class=version>60</span> 版本开始支持</span><li class="environment has-support"><span class="icon safari">Safari:</span> <span class=support>自 <span class=version>11</span> 版本开始支持</span><li class="environment has-support has-link"><a href=https://nodejs.org/en/blog/release/v13.2.0/#notable-changes><span class="icon nodejs">Node.js:</span> <span class=support>自 <span class=version>13.2.0</span> 版本开始支持</span></a><li class="environment has-support"><span class="icon babel">Babel:</span> <span class=support>支持</span></ul><div class=feature-support-info><a href=/features/support>关于特性支持列表</a></div><p>This article explains how to use JS modules, how to deploy them responsibly, and how the Chrome team is working to make modules even better in the future.<h2 id=intro>What are JS modules? <a href=#intro class=bookmark>#</a></h2><p>JS modules (also known as “ES modules” or “ECMAScript modules”) are a major new feature, or rather a collection of new features. You may have used a userland JavaScript module system in the past. Maybe you used <a href=https://nodejs.org/docs/latest-v10.x/api/modules.html>CommonJS like in Node.js</a>, or maybe <a href=https://github.com/amdjs/amdjs-api/blob/master/AMD.md>AMD</a>, or maybe something else. All of these module systems have one thing in common: they allow you to import and export stuff.<p>JavaScript now has standardized syntax for exactly that. Within a module, you can use the <code>export</code> keyword to export just about anything. You can export a <code>const</code>, a <code>function</code>, or any other variable binding or declaration. Just prefix the variable statement or declaration with <code>export</code> and you’re all set:<pre class=language-js><code class=language-js><span class="token comment">// 📁 lib.mjs</span><br><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function function-variable">repeat</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>string<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>string<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">shout</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>string<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">!</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>You can then use the <code>import</code> keyword to import the module from another module. Here, we’re importing the <code>repeat</code> and <code>shout</code> functionality from the <code>lib</code> module, and using it in our <code>main</code> module:<pre class=language-js><code class=language-js><span class="token comment">// 📁 main.mjs</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>repeat<span class="token punctuation">,</span> shout<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./lib.mjs'</span><span class="token punctuation">;</span><br><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'hello hello'</span><br><span class="token function">shout</span><span class="token punctuation">(</span><span class="token string">'Modules in action'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'MODULES IN ACTION!'</span></code></pre><p>You could also export a <em>default</em> value from a module:<pre class=language-js><code class=language-js><span class="token comment">// 📁 lib.mjs</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>string<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">!</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Such <code>default</code> exports can be imported using any name:<pre class=language-js><code class=language-js><span class="token comment">// 📁 main.mjs</span><br><span class="token keyword">import</span> shout <span class="token keyword">from</span> <span class="token string">'./lib.mjs'</span><span class="token punctuation">;</span><br><span class="token comment">//     ^^^^^</span></code></pre><p>Modules are a little different from classic scripts:<ul><li><p>Modules have <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode>strict mode</a> enabled by default.<li><p>HTML-style comment syntax is not supported in modules, although it works in classic scripts.<pre class=language-js><code class=language-js><span class="token comment">// Don’t use HTML-style comment syntax in JavaScript!</span><br><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">TODO</span><span class="token operator">:</span> Rename x to y<span class="token punctuation">.</span><br><span class="token comment">// Use a regular single-line comment instead:</span><br><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span> <span class="token comment">// TODO: Rename x to y.</span></code></pre><li><p>Modules have a lexical top-level scope. This means that for example, running <code>var foo = 42;</code> within a module does <em>not</em> create a global variable named <code>foo</code>, accessible through <code>window.foo</code> in a browser, although that would be the case in a classic script.<li><p>Similarly, the <code>this</code> within modules does not refer to the global <code>this</code>, and instead is <code>undefined</code>. (Use <a href=/features/globalthis><code>globalThis</code></a> if you need access to the global <code>this</code>.)<li><p>The new static <code>import</code> and <code>export</code> syntax is only available within modules — it doesn’t work in classic scripts.<li><p><a href=/features/top-level-await>Top-level <code>await</code></a> is available in modules, but not in classic scripts. Relatedly, <code>await</code> cannot be used as a variable name anywhere in a module, although variables in classic scripts <em>can</em> be named <code>await</code> outside of async functions.</ul><p>Because of these differences, <em>the same JavaScript code might behave differently when treated as a module vs. a classic script</em>. As such, the JavaScript runtime needs to know which scripts are modules.<h2 id=browser>Using JS modules in the browser <a href=#browser class=bookmark>#</a></h2><p>On the web, you can tell browsers to treat a <code>&lt;script></code> element as a module by setting the <code>type</code> attribute to <code>module</code>.<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main.mjs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">nomodule</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fallback.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>Browsers that understand <code>type="module"</code> ignore scripts with a <code>nomodule</code> attribute. This means you can serve a module-based payload to module-supporting browsers while providing a fallback to other browsers. The ability to make this distinction is amazing, if only for performance! Think about it: only modern browsers support modules. If a browser understands your module code, it also supports <a href=https://codepen.io/samthor/pen/MmvdOM>features that were around before modules</a>, such as arrow functions or <code>async</code>-<code>await</code>. You don’t have to transpile those features in your module bundle anymore! You can <a href=https://philipwalton.com/articles/deploying-es2015-code-in-production-today/ >serve smaller and largely untranspiled module-based payloads to modern browsers</a>. Only legacy browsers get the <code>nomodule</code> payload.<p>Since <a href=#defer>modules are deferred by default</a>, you may want to load the <code>nomodule</code> script in a deferred fashion as well:<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main.mjs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">nomodule</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fallback.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id=module-vs-script>Browser-specific differences between modules and classic scripts <a href=#module-vs-script class=bookmark>#</a></h3><p>As you now know, modules are different from classic scripts. On top of the platform-agnostic differences we’ve outlined above, there are some differences that are specific to browsers.<p>For example, modules are evaluated only once, while classic scripts are evaluated however many times you add them to the DOM.<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classic.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classic.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token comment">&lt;!-- classic.js executes multiple times. --></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module.mjs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module.mjs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token keyword">import</span> <span class="token string">'./module.mjs'</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token comment">&lt;!-- module.mjs executes only once. --></span></code></pre><p>Also, module scripts and their dependencies are fetched with CORS. This means that any cross-origin module scripts must be served with the proper headers, such as <code>Access-Control-Allow-Origin: *</code>. This is not true for classic scripts.<p>Another difference relates to the <code>async</code> attribute, which causes the script to download without blocking the HTML parser (like <code>defer</code>) except it also executes the script as soon as possible, with no guaranteed order, and without waiting for HTML parsing to finish. The <code>async</code> attribute does not work for inline classic scripts, but it does work for inline <code>&lt;script type="module"></code>.<h3 id=mjs>A note on file extensions <a href=#mjs class=bookmark>#</a></h3><p>You may have noticed we’re using the <code>.mjs</code> file extension for modules. On the Web, the file extension doesn’t really matter, as long as the file is served with <a href=https://html.spec.whatwg.org/multipage/scripting.html#scriptingLanguages:javascript-mime-type>the JavaScript MIME type <code>text/javascript</code></a>. The browser knows it’s a module because of the <code>type</code> attribute on the script element.<p>Still, we recommend using the <code>.mjs</code> extension for modules, for two reasons:<ol><li>During development, the <code>.mjs</code> extension makes it crystal clear to you and anyone else looking at your project that the file is a module as opposed to a classic script. (It’s not always possible to tell just by looking at the code.) As mentioned before, modules are treated differently than classic scripts, so the difference is hugely important!<li>It ensures that your file is parsed as a module by runtimes such as <a href=https://nodejs.org/api/esm.html#esm_enabling>Node.js</a> and <a href=/docs/d8><code>d8</code></a>, and build tools such as <a href=https://babeljs.io/docs/en/options#sourcetype>Babel</a>. While these environments and tools each have proprietary ways via configuration to interpret files with other extensions as modules, the <code>.mjs</code> extension is the cross-compatible way to ensure that files are treated as modules.</ol><div class=note><p><strong>Note:</strong> To deploy <code>.mjs</code> on the web, your web server needs to be configured to serve files with this extension using the appropriate <code>Content-Type: text/javascript</code> header, as mentioned above. Additionally, you may want to configure your editor to treat <code>.mjs</code> files as <code>.js</code> files to get syntax highlighting. Most modern editors already do this by default.</div><h3 id=specifiers>Module specifiers <a href=#specifiers class=bookmark>#</a></h3><p>When <code>import</code>ing modules, the string that specifies the location of the module is called the “module specifier” or the “import specifier”. In our earlier example, the module specifier is <code>'./lib.mjs'</code>:<pre class=language-js><code class=language-js><span class="token keyword">import</span> <span class="token punctuation">{</span>shout<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./lib.mjs'</span><span class="token punctuation">;</span><br><span class="token comment">//                  ^^^^^^^^^^^</span></code></pre><p>Some restrictions apply to module specifiers in browsers. So-called “bare” module specifiers are currently not supported. This restriction is <a href=https://html.spec.whatwg.org/multipage/webappapis.html#resolve-a-module-specifier>specified</a> so that in the future, browsers can allow custom module loaders to give special meaning to bare module specifiers like the following:<pre class=language-js><code class=language-js><span class="token comment">// Not supported (yet):</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>shout<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'jquery'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>shout<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lib.mjs'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>shout<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'modules/lib.mjs'</span><span class="token punctuation">;</span></code></pre><p>On the other hand, the following examples are all supported:<pre class=language-js><code class=language-js><span class="token comment">// Supported:</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>shout<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./lib.mjs'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>shout<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../lib.mjs'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>shout<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/modules/lib.mjs'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>shout<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://simple.example/modules/lib.mjs'</span><span class="token punctuation">;</span></code></pre><p>For now, module specifiers must be full URLs, or relative URLs starting with <code>/</code>, <code>./</code>, or <code>../</code>.<h3 id=defer>Modules are deferred by default <a href=#defer class=bookmark>#</a></h3><p>Classic <code>&lt;script></code>s block the HTML parser by default. You can work around it by adding <a href=https://html.spec.whatwg.org/multipage/scripting.html#attr-script-defer>the <code>defer</code> attribute</a>, which ensures that the script download happens in parallel with HTML parsing.<figure><img alt="" height=200 loading=lazy src=/_img/modules/async-defer.svg width=820></figure><p>Module scripts are deferred by default. As such, there is no need to add <code>defer</code> to your <code>&lt;script type="module"></code> tags! Not only does the download for the main module happen in parallel with HTML parsing, the same goes for all the dependency modules!<h2 id=other-features>Other module features <a href=#other-features class=bookmark>#</a></h2><h3 id=dynamic-import>Dynamic <code>import()</code> <a href=#dynamic-import class=bookmark>#</a></h3><p>So far we’ve only used static <code>import</code>. With static <code>import</code>, your entire module graph needs to be downloaded and executed before your main code can run. Sometimes, you don’t want to load a module up-front, but rather on-demand, only when you need it — when the user clicks a link or a button, for example. This improves the initial load-time performance. <a href=/features/dynamic-import>Dynamic <code>import()</code></a> makes this possible!<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>  <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> moduleSpecifier <span class="token operator">=</span> <span class="token string">'./lib.mjs'</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> <span class="token punctuation">{</span>repeat<span class="token punctuation">,</span> shout<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span>moduleSpecifier<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// → 'hello hello'</span><br>    <span class="token function">shout</span><span class="token punctuation">(</span><span class="token string">'Dynamic import in action'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// → 'DYNAMIC IMPORT IN ACTION!'</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>Unlike static <code>import</code>, dynamic <code>import()</code> can be used from within regular scripts. It’s an easy way to incrementally start using modules in your existing code base. For more details, see <a href=/features/dynamic-import>our article on dynamic <code>import()</code></a>.<div class=note><p><strong>Note:</strong> <a href=https://developers.google.com/web/fundamentals/performance/webpack/use-long-term-caching>webpack has its own version of <code>import()</code></a> that cleverly splits the imported module into its own chunk, separate from the main bundle.</div><h3 id=import-meta><code>import.meta</code> <a href=#import-meta class=bookmark>#</a></h3><p>Another new module-related feature is <code>import.meta</code>, which gives you metadata about the current module. The exact metadata you get is not specified as part of ECMAScript; it depends on the host environment. In a browser, you might get different metadata than in Node.js, for example.<p>Here’s an example of <code>import.meta</code> on the web. By default, images are loaded relative to the current URL in HTML documents. <code>import.meta.url</code> makes it possible to load an image relative to the current module instead.<pre class=language-js><code class=language-js><span class="token keyword">function</span> <span class="token function">loadThumbnail</span><span class="token punctuation">(</span><span class="token parameter">relativePath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>relativePath<span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  image<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span><br>  <span class="token keyword">return</span> image<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> thumbnail <span class="token operator">=</span> <span class="token function">loadThumbnail</span><span class="token punctuation">(</span><span class="token string">'../img/thumbnail.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>container<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>thumbnail<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id=performance>Performance recommendations <a href=#performance class=bookmark>#</a></h2><h3 id=bundle>Keep bundling <a href=#bundle class=bookmark>#</a></h3><p>With modules, it becomes possible to develop websites without using bundlers such as webpack, Rollup, or Parcel. It’s fine to use native JS modules directly in the following scenarios:<ul><li>during local development<li>in production for small web apps with less than 100 modules in total and with a relatively shallow dependency tree (i.e. a maximum depth less than 5)</ul><p>However, as we learned during <a href=https://docs.google.com/document/d/1ovo4PurT_1K4WFwN2MYmmgbLcr7v6DRQN67ESVA-wq0/pub>our bottleneck analysis of Chrome’s loading pipeline when loading a modularized library composed of ~300 modules</a>, the loading performance of bundled applications is better than unbundled ones.<figure><a href=https://docs.google.com/document/d/1ovo4PurT_1K4WFwN2MYmmgbLcr7v6DRQN67ESVA-wq0/pub><img alt="" height=311 loading=lazy src=/_img/modules/renderer-main-thread-time-breakdown.svg width=830></a></figure><p>One reason for this is that the static <code>import</code>/<code>export</code> syntax is statically analyzable, and it can thus help bundler tools optimize your code by eliminating unused exports. Static <code>import</code> and <code>export</code> are more than just syntax; they are a critical tooling feature!<p><em>Our general recommendation is to continue using bundlers before deploying modules to production.</em> In a way, bundling is a similar optimization to minifying your code: it results in a performance benefit, because you end up shipping less code. Bundling has the same effect! Keep bundling.<p>As always, <a href=https://developers.google.com/web/updates/2017/04/devtools-release-notes#coverage>the DevTools Code Coverage feature</a> can help you identify if you are pushing unnecessary code to users. We also recommend the use of <a href=https://developers.google.com/web/fundamentals/performance/webpack/use-long-term-caching#lazy-loading>code splitting</a> to split bundles and to defer loading of non-First-Meaningful-Paint critical scripts.<h4 id=bundle-tradeoffs>Trade-offs of bundling vs. shipping unbundled modules <a href=#bundle-tradeoffs class=bookmark>#</a></h4><p>As usual in web development, everything is a trade-off. Shipping unbundled modules might decrease initial load performance (cold cache), but could actually improve load performance for subsequent visits (warm cache) compared to shipping a single bundle without code splitting. For a 200 KB code base, changing a single fine-grained module and having that be the only fetch from the server for subsequent visits is way better than having to re-fetch the whole bundle.<p>If you’re more concerned with the experience of visitors with warm caches than first-visit performance and have a site with less than a few hundred fine-grained modules, you could experiment with shipping unbundled modules, measure the performance impact for both cold and warm loads, and then make a data-driven decision!<p>Browser engineers are working hard on improving the performance of modules out-of-the-box. Over time, we expect shipping unbundled modules to become feasible in more situations.<h3 id=finegrained-modules>Use fine-grained modules <a href=#finegrained-modules class=bookmark>#</a></h3><p>Get into the habit of writing your code using small, fine-grained modules. During development, it’s generally better to have just a few exports per module than it is to manually combine lots of exports into a single file.<p>Consider a module named <code>./util.mjs</code> that exports three functions named <code>drop</code>, <code>pluck</code>, and <code>zip</code>:<pre class=language-js><code class=language-js><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span><br><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">pluck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span><br><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">zip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span></code></pre><p>If your code base only really needs the <code>pluck</code> functionality, you’d probably import it as follows:<pre class=language-js><code class=language-js><span class="token keyword">import</span> <span class="token punctuation">{</span>pluck<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./util.mjs'</span><span class="token punctuation">;</span></code></pre><p>In this case, (without a build-time bundling step) the browser still ends up having to download, parse, and compile the entire <code>./util.mjs</code> module even though it only really needs that one export. That’s wasteful!<p>If <code>pluck</code> doesn’t share any code with <code>drop</code> and <code>zip</code>, it’d be better to move it to its own fine-grained module, e.g. <code>./pluck.mjs</code>.<pre class=language-js><code class=language-js><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">pluck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span></code></pre><p>We can then import <code>pluck</code> without the overhead of dealing with <code>drop</code> and <code>zip</code>:<pre class=language-js><code class=language-js><span class="token keyword">import</span> <span class="token punctuation">{</span>pluck<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./pluck.mjs'</span><span class="token punctuation">;</span></code></pre><div class=note><p><strong>Note:</strong> You could use a <code>default</code> export instead of a named export here, depending on your personal preference.</div><p>Not only does this keep your source code nice and simple, it also reduces the need for dead-code elimination as performed by bundlers. If one of the modules in your source tree is unused, then it never gets imported, and so the browser never downloads it. The modules that <em>do</em> get used can be individually <a href=/blog/code-caching-for-devs>code-cached</a> by the browser. (The infrastructure to make this happen already landed in V8, and <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=841466">work is underway</a> to enable it in Chrome as well.)<p>Using small, fine-grained modules helps prepare your code base for the future where <a href=#web-packaging>a native bundling solution</a> might be available.<h3 id=preload>Preload modules <a href=#preload class=bookmark>#</a></h3><p>You can optimize the delivery of your modules further by using <a href=https://developers.google.com/web/updates/2017/12/modulepreload><code>&lt;link rel="modulepreload"></code></a>. This way, browsers can preload and even preparse and precompile modules and their dependencies.<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modulepreload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lib.mjs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modulepreload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main.mjs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main.mjs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">nomodule</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fallback.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>This is especially important for larger dependency trees. Without <code>rel="modulepreload"</code>, the browser needs to perform multiple HTTP requests to figure out the full dependency tree. However, if you declare the full list of dependent module scripts with <code>rel="modulepreload"</code>, the browser doesn’t have to discover these dependencies progressively.<h3 id=http2>Use HTTP/2 <a href=#http2 class=bookmark>#</a></h3><p>Using HTTP/2 where possible is always good performance advice, if only for <a href=https://developers.google.com/web/fundamentals/performance/http2/#request_and_response_multiplexing>its multiplexing support</a>. With HTTP/2 multiplexing, multiple request and response messages can be in flight at the same time, which is beneficial for loading module trees.<p>The Chrome team investigated if another HTTP/2 feature, specifically <a href=https://developers.google.com/web/fundamentals/performance/http2/#server_push>HTTP/2 server push</a>, could be a practical solution for deploying highly-modularized apps. Unfortunately, <a href=https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/ >HTTP/2 server push is tricky to get right</a>, and web servers’ and browsers’ implementations are not currently optimized towards highly-modularized web app use cases. It’s hard to only push the resources that the user doesn’t already have cached, for example, and solving that by communicating the entire cache state of an origin to the server is a privacy risk.<p>So by all means, go ahead and use HTTP/2! Just keep in mind that HTTP/2 server push is (unfortunately) not a silver bullet.<h2 id=adoption>Web adoption of JS modules <a href=#adoption class=bookmark>#</a></h2><p>JS modules are slowly gaining adoption on the web. <a href=https://www.chromestatus.com/metrics/feature/timeline/popularity/2062>Our usage counters</a> show that 0.08% of all page loads currently use <code>&lt;script type="module"></code>. Note that this number excludes other entry points such as dynamic <code>import()</code> or <a href=https://drafts.css-houdini.org/worklets/ >worklets</a>.<h2 id=next>What’s next for JS modules? <a href=#next class=bookmark>#</a></h2><p>The Chrome team is working on improving the development-time experience with JS modules in various ways. Let’s discuss some of them.<h3 id=resolution>Faster and deterministic module resolution algorithm <a href=#resolution class=bookmark>#</a></h3><p>We proposed a change to the module resolution algorithm that addressed a deficiency in speed and determinism. The new algorithm is now live in both <a href=https://github.com/whatwg/html/pull/2991>the HTML specification</a> and <a href=https://github.com/tc39/ecma262/pull/1006>the ECMAScript specification</a>, and is implemented in <a href=http://crbug.com/763597>Chrome 63</a>. Expect this improvement to land in more browsers soon!<p>The new algorithm is much more efficient and faster. The computational complexity of the old algorithm was quadratic, i.e. 𝒪(n²), in the size of the dependency graph, and so was Chrome’s implementation at the time. The new algorithm is linear, i.e. 𝒪(n).<p>Moreover, the new algorithm reports resolution errors in a deterministic way. Given a graph containing multiple errors, different runs of the old algorithm could report different errors as being responsible for the resolution failure. This made debugging unnecessarily difficult. The new algorithm is guaranteed to report the same error every time.<h3 id=worklets-workers>Worklets and web workers <a href=#worklets-workers class=bookmark>#</a></h3><p>Chrome now implements <a href=https://drafts.css-houdini.org/worklets/ >worklets</a>, which allow web developers to customize hard-coded logic in the “low-level parts” of web browsers. With worklets, web developers can feed an JS module into the rendering pipeline or the audio processing pipeline (and possibly more pipelines in the future!).<p>Chrome 65 supports <a href=https://developers.google.com/web/updates/2018/01/paintapi><code>PaintWorklet</code></a> (a.k.a. the CSS Paint API) to control how a DOM element is painted.<pre class=language-js><code class=language-js><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> css<span class="token punctuation">.</span>paintWorklet<span class="token punctuation">.</span><span class="token function">addModule</span><span class="token punctuation">(</span><span class="token string">'paint-worklet.mjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Chrome 66 supports <a href=https://developers.google.com/web/updates/2017/12/audio-worklet><code>AudioWorklet</code></a>, which allows you to control audio processing with your own code. The same Chrome version started an <a href=https://groups.google.com/a/chromium.org/d/msg/blink-dev/AZ-PYPMS7EA/DEqbe2u5BQAJ>OriginTrial for <code>AnimationWorklet</code></a>, which enables creating scroll-linked and other high-performance procedural animations.<p>Finally, <a href=https://drafts.css-houdini.org/css-layout-api/ ><code>LayoutWorklet</code></a> (a.k.a. the CSS Layout API) is now implemented in Chrome 67.<p>We’re <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=680046">working</a> on adding support for using JS modules with dedicated web workers in Chrome. You can already try this feature with <code>chrome://flags/#enable-experimental-web-platform-features</code> enabled.<pre class=language-js><code class=language-js><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'worker.mjs'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'module'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>JS module support for shared workers and service workers is coming soon:<pre class=language-js><code class=language-js><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SharedWorker</span><span class="token punctuation">(</span><span class="token string">'worker.mjs'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'module'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> registration <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'worker.mjs'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'module'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=package-name-maps>Import maps <a href=#package-name-maps class=bookmark>#</a></h3><p>In Node.js/npm, it’s common to import JS modules by their “package name”. For example:<pre class=language-js><code class=language-js><span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">'moment'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>pluck<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash-es'</span><span class="token punctuation">;</span></code></pre><p>Currently, <a href=https://html.spec.whatwg.org/multipage/webappapis.html#resolve-a-module-specifier>per the HTML spec</a>, such “bare import specifiers” throw an exception. <a href=https://github.com/domenic/import-maps>Our import maps proposal</a> allows such code to work on the web, including in production apps. An import map is a JSON resource that helps the browser convert bare import specifiers into full URLs.<p>Import maps are still in the proposal stage. Although we’ve thought a lot about how they address various use cases, we’re still engaging with the community, and haven’t yet written up a full specification. Feedback is welcome!<h3 id=web-packaging>Web packaging: native bundles <a href=#web-packaging class=bookmark>#</a></h3><p>The Chrome loading team is currently exploring <a href=https://github.com/WICG/webpackage>a native web packaging format</a> as a new way to distribute web apps. The core features of web packaging are:<p><a href=https://wicg.github.io/webpackage/draft-yasskin-http-origin-signed-responses.html>Signed HTTP Exchanges</a> that allow a browser to trust that a single HTTP request/response pair was generated by the origin it claims; <a href=https://tools.ietf.org/html/draft-yasskin-wpack-bundled-exchanges-00>Bundled HTTP Exchanges</a>, that is, a collection of exchanges, each of which could be signed or unsigned, with some metadata describing how to interpret the bundle as a whole.<p>Combined, such a web packaging format would enable <em>multiple same-origin resources</em> to be <em>securely embedded</em> in a <em>single</em> HTTP <code>GET</code> response.<p>Existing bundling tools such as webpack, Rollup, or Parcel currently emit a single JavaScript bundle, in which the semantics of the original separate modules and assets are lost. With native bundles, browsers could unbundle the resources back to their original form. In simplified terms, you can imagine a Bundled HTTP Exchange as a bundle of resources that can be accessed in any order via a table of contents (manifest), and where the contained resources can be efficiently stored and labeled according to their relative importance, all while maintaining the notion of individual files. Because of this, native bundles could improve the debugging experience. When viewing assets in the DevTools, browsers could pinpoint the original module without the need for complex source-maps.<p>The native bundle format’s transparency opens up various optimization opportunities. For example, if a browser already has part of a native bundle cached locally, it could communicate that to the web server and then only download the missing parts.<p>Chrome already supports a part of the proposal (<a href=https://wicg.github.io/webpackage/draft-yasskin-http-origin-signed-responses.html><code>SignedExchanges</code></a>), but the bundling format itself as well as its application to highly-modularized apps are still in exploratory phase. Your feedback is highly welcome on the repository or via email to <a href=mailto:loading-dev@chromium.org>loading-dev@chromium.org</a>!<h3 id=layered-apis>Layered APIs <a href=#layered-apis class=bookmark>#</a></h3><p>Shipping new features and web APIs incurs an ongoing maintenance and runtime cost — every new feature pollutes the browser namespace, increases startup costs, and represents a new surface to introduce bugs throughout the codebase. <a href=https://github.com/drufball/layered-apis>Layered APIs</a> are an effort to implement and ship higher-level APIs with web browsers in a more scalable way. JS modules are a key enabling technology for layered APIs:<ul><li>Since modules are explicitly imported, requiring layered APIs to be exposed via modules ensures that developers only pay for the layered APIs they use.<li>Because module loading is configurable, layered APIs can have a built-in mechanism for automatically loading polyfills in browsers that don’t support layered APIs.</ul><p>The details of how modules and layered APIs work together <a href=https://github.com/drufball/layered-apis/issues>are still being worked out</a>, but the current proposal looks something like this:<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><br>  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><br>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>std:virtual-scroller|https://example.com/virtual-scroller.mjs<span class="token punctuation">"</span></span><br><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>The <code>&lt;script></code> element loads the <code>virtual-scroller</code> API either from the browser’s built-in set of layered APIs (<code>std:virtual-scroller</code>) or from a fallback URL pointing to a polyfill. This API can do anything JS modules can do in web browsers. One example would be defining <a href=https://www.chromestatus.com/feature/5673195159945216>a custom <code>&lt;virtual-scroller></code> element</a>, so that the following HTML is progressively enhanced as desired:<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>virtual-scroller</span><span class="token punctuation">></span></span><br>  <span class="token comment">&lt;!-- Content goes here. --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>virtual-scroller</span><span class="token punctuation">></span></span></code></pre><h2 id=credits>Credits <a href=#credits class=bookmark>#</a></h2><p>Thanks to Domenic Denicola, Georg Neis, Hiroki Nakagawa, Hiroshige Hayashizaki, Jakob Gruber, Kouhei Ueno, Kunihiko Sakamoto, and Yang Guo for making JavaScript modules fast!<p>Also, kudos to Eric Bidelman, Jake Archibald, Jason Miller, Jeffrey Posnick, Philip Walton, Rob Dodson, Sam Dutton, Sam Thorogood, and Thomas Steiner for reading a draft version of this guide and giving their feedback.</div><footer><div><picture><source srcset="/_img/avatars/addy-osmani.avif, /_img/avatars/addy-osmani@2x.avif 2x" type=image/avif><img alt="" height=96 loading=lazy src=/_img/avatars/addy-osmani.jpg width=96 srcset="/_img/avatars/addy-osmani@2x.jpg 2x"></picture><picture><source srcset="/_img/avatars/mathias-bynens.avif, /_img/avatars/mathias-bynens@2x.avif 2x" type=image/avif><img alt="" height=96 loading=lazy src=/_img/avatars/mathias-bynens.jpg width=96 srcset="/_img/avatars/mathias-bynens@2x.jpg 2x"></picture><p>作者：Addy Osmani (<a href=https://twitter.com/addyosmani>@addyosmani</a>) and Mathias Bynens (<a href=https://twitter.com/mathias>@mathias</a>).</div><a href=https://twitter.com/v8js/status/1008725884575109120 class=retweet>Retweet this article!</a></footer></article></main><footer id=footer><div><nav><a href=https://v8.dev/features/modules>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/features/modules.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>