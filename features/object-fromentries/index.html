<!doctype html><html lang=zh-CN><meta charset=utf-8><title>Object.fromEntries · V8</title><meta content="width=device-width,initial-scale=1" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/_css/feature-support.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=' js'</script><meta content="Object.fromEntries is a useful addition to the built-in JavaScript library that complements Object.entries." name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li><a href=/blog/ >博客</a><li><a href=/docs/ >文档</a><li class=current><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline><code>Object.fromEntries</code></h1><p class=meta>发布时间 <time datetime="2019-06-18 00:00:00" itemprop=datePublished>2019-06-18</time> · 标签： <a href=/features/tags/ecmascript class=tag>ECMAScript</a> <a href=/features/tags/es2019 class=tag>ES2019</a></header><div itemprop=articleBody><p><code>Object.fromEntries</code> is a useful addition to the built-in JavaScript library. Before explaining what it does, it helps to understand the pre-existing <code>Object.entries</code> API.<h2 id=object.entries><code>Object.entries</code> <a href=#object.entries class=bookmark>#</a></h2><p>The <code>Object.entries</code> API has been around for a while.<ul class=feature-support><li class="environment has-support"><span class="icon chrome">Chrome:</span> <span class=support>自 <span class=version>54</span> 版本开始支持</span><li class="environment has-support"><span class="icon firefox">Firefox:</span> <span class=support>自 <span class=version>47</span> 版本开始支持</span><li class="environment has-support"><span class="icon safari">Safari:</span> <span class=support>自 <span class=version>10.1</span> 版本开始支持</span><li class="environment has-support"><span class="icon nodejs">Node.js:</span> <span class=support>自 <span class=version>7</span> 版本开始支持</span><li class="environment has-support"><span class="icon babel">Babel:</span> <span class=support>支持</span></ul><div class=feature-support-info><a href=/features/support>关于特性支持列表</a></div><p>For each key-value pair in an object, <code>Object.entries</code> gives you an array where the first element is the key, and the second element is the value.<p><code>Object.entries</code> is especially useful in combination with <code>for</code>-<code>of</code>, as it enables you to very elegantly iterate over all key-value pairs in an object:<pre class=language-js><code class=language-js><span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> entries <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → [['x', 42], ['y', 50]]</span><br><br><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">The value of </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>key<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>value<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">.</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token comment">// Logs:</span><br><span class="token comment">// The value of x is 42.</span><br><span class="token comment">// The value of y is 50.</span></code></pre><p>Unfortunately, there’s no easy way to go from the entries result back to an equivalent object… until now!<h2 id=object.fromentries><code>Object.fromEntries</code> <a href=#object.fromentries class=bookmark>#</a></h2><p>The new <code>Object.fromEntries</code> API performs the inverse of <code>Object.entries</code>. This makes it easy to reconstruct an object based on its entries:<pre class=language-js><code class=language-js><span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> entries <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → [['x', 42], ['y', 50]]</span><br><br><span class="token keyword">const</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → { x: 42, y: 50 }</span></code></pre><p>One common use case is transforming objects. You can now do this by iterating over its entries, and then using array methods you might already be familiar with:<pre class=language-js><code class=language-js><span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> abc<span class="token operator">:</span> <span class="token number">9001</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><br>  Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span> key<span class="token punctuation">,</span> value <span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> key<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span> key<span class="token punctuation">,</span> value <span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span> key<span class="token punctuation">,</span> value <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → { x: 84, y: 100 }</span></code></pre><p>In this example, we’re <code>filter</code>ing the object to only get keys of length <code>1</code>, that is, only the keys <code>x</code> and <code>y</code>, but not the key <code>abc</code>. We then <code>map</code> over the remaining entries and return an updated key-value pair for each. In this example, we double each value by multiplying it by <code>2</code>. The end result is a new object, with only properties <code>x</code> and <code>y</code>, and the new values.<h2 id=objects-vs.-maps>Objects vs. maps <a href=#objects-vs.-maps class=bookmark>#</a></h2><p>JavaScript also supports <code>Map</code>s, which are often a more suitable data structure than regular objects. So in code that you have full control over, you might be using maps instead of objects. However, as a developer, you do not always get to choose the representation. Sometimes the data you’re operating on comes from an external API or from some library function that gives you an object instead of a map.<p><code>Object.entries</code> made it easy to convert objects into maps:<pre class=language-js><code class=language-js><span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> language<span class="token operator">:</span> <span class="token string">'JavaScript'</span><span class="token punctuation">,</span> coolness<span class="token operator">:</span> <span class="token number">9001</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token comment">// Convert the object into a map:</span><br><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The inverse is equally useful: even if your code is using maps, you might need to serialize your data at some point, for example to turn it into JSON to send an API request. Or maybe you need to pass the data to another library that expects an object instead of a map. In these cases, you need to create an object based on the map data. <code>Object.fromEntries</code> makes this trivial:<pre class=language-js><code class=language-js><span class="token comment">// Convert the map back into an object:</span><br><span class="token keyword">const</span> objectCopy <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → { language: 'JavaScript', coolness: 9001 }</span></code></pre><p>With both <code>Object.entries</code> and <code>Object.fromEntries</code> in the language, you can now easily convert between maps and objects.<h3 id=data-loss>Warning: beware of data loss <a href=#data-loss class=bookmark>#</a></h3><p>When converting maps into plain objects like in the above example, there’s a implicit assumption that each key stringifies uniquely. If this assumption does not hold, data loss occurs:<pre class=language-js><code class=language-js><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>  <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → { '[object Object]': 'b' }</span><br><span class="token comment">// Note: the value 'a' is nowhere to be found, since both keys</span><br><span class="token comment">// stringify to the same value of '[object Object]'.</span></code></pre><p>Before using <code>Object.fromEntries</code> or any other technique to convert a map into a object, make sure the map’s keys produce unique <code>toString</code> results.<h2 id=support><code>Object.fromEntries</code> support <a href=#support class=bookmark>#</a></h2><ul class=feature-support><li class="environment has-support has-link"><a href=/blog/v8-release-73#object.fromentries><span class="icon chrome">Chrome:</span> <span class=support>自 <span class=version>73</span> 版本开始支持</span></a><li class="environment has-support"><span class="icon firefox">Firefox:</span> <span class=support>自 <span class=version>63</span> 版本开始支持</span><li class="environment has-support"><span class="icon safari">Safari:</span> <span class=support>自 <span class=version>12.1</span> 版本开始支持</span><li class="environment has-support has-link"><a href=https://twitter.com/mathias/status/1120700101637353473><span class="icon nodejs">Node.js:</span> <span class=support>自 <span class=version>12</span> 版本开始支持</span></a><li class="environment has-support"><span class="icon babel">Babel:</span> <span class=support>支持</span></ul><div class=feature-support-info><a href=/features/support>关于特性支持列表</a></div></div><footer><div><picture><source srcset="/_img/avatars/mathias-bynens.avif, /_img/avatars/mathias-bynens@2x.avif 2x" type=image/avif><img alt="" height=96 loading=lazy src=/_img/avatars/mathias-bynens.jpg srcset="/_img/avatars/mathias-bynens@2x.jpg 2x" width=96></picture><p>作者：Mathias Bynens (<a href=https://twitter.com/mathias>@mathias</a>), JavaScript whisperer.</div><a href=https://twitter.com/v8js/status/1140993821897121796 class=retweet>Retweet this article!</a></footer></article></main><footer id=footer><div><nav><a href=https://v8.dev/features/object-fromentries>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/features/object-fromentries.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>